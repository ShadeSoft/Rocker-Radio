<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Rocker Rádió</title>
	<script>window.$ = window.jQuery = require('jquery');</script>
	<script>
		function loadSongData() {
			$.get('http://stream.diazol.hu:35200', function(response) {
				var box = $(response).find(".mount:contains('Mount Point /live')").closest('.roundbox');
				var songData = $(box.find("td:contains('Currently playing:')").siblings('.streamstats')).html().replace(/\s\[[0-9]{4}\]/, '').split(' - ');
				$('h1 span').html(songData[1] ?: '');
				$('h1 small').html(songData[0] ?: '');
			});
		}

		$(document).ready(function() {
			setInterval(function() {
				loadSongData();
			}, 10000);

			loadSongData();
		});
	</script>
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,600&display=swap" rel="stylesheet">
	<style>
		body {
			background: #222;
			color: #eee;
			margin: 0;
			padding: 0;
		}
		div {
			display: flex;
			align-items: center;
  			justify-content: center;
  			height: 100vh;
		}
		figure {
			text-align: center;
		}
		h1 {
			font-family: 'Open Sans', sans-serif;
			font-weight: 600;
		}
		h1 span {
			font-weight: 300;
		}
	</style>
</head>
<body>
	<div>
		<figure>
			<h1><span></span><br><small></small></h1>
			<audio controls autoplay src="http://stream.diazol.hu:35200/stream"></audio>
		</figure>
	</div>
</body>
</html>